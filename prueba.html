<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editor de Texto + Analizador</title>

    <!-- Uso de script-->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /*Fondo de la pantalla*/
        body {
            background-image: url("fondo.jpg");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* El contenedor del editor */
        .editor-wrapper {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
        }

        #editor {
            min-height: 180px;
        }
    </style>
</head>

<body class="p-6">

    <h1 class="text-3xl font-bold text-center mb-6 text-white drop-shadow-lg">
        Editor y Analizador de Texto
    </h1>

    <!-- contenedor -->
    <div class="max-w-4xl mx-auto editor-wrapper">

        <!-- herramientas -->
        <div class="flex flex-wrap gap-2 mb-4">

            <button onclick="cmd('bold')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">N</button>
            <button onclick="cmd('italic')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 italic">I</button>
            <button onclick="cmd('underline')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 underline">U</button>

            <select onchange="cmdValue('fontSize', this.value)" class="px-2 py-1 bg-gray-200 rounded">
                <option value="3">Tamaño</option>
                <option value="2">Pequeño</option>
                <option value="3">Normal</option>
                <option value="5">Grande</option>
                <option value="7">Muy grande</option>
            </select>

            <input type="color" onchange="cmdValue('foreColor', this.value)" class="w-10 h-10 p-1 rounded">

            <button onclick="cmd('justifyLeft')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">⯇</button>
            <button onclick="cmd('justifyCenter')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">≡</button>
            <button onclick="cmd('justifyRight')" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">⯈</button>

            <button onclick="limpiar()" class="px-3 py-1 bg-red-400 text-white rounded hover:bg-red-500">Limpiar</button>
            <button onclick="copiar()" class="px-3 py-1 bg-blue-400 text-white rounded hover:bg-blue-500">Copiar</button>
        </div>

        <!-- editor -->
        <div id="editor"
             contenteditable="true"
             class="p-4 border rounded-lg bg-gray-50 shadow-inner">
        </div>

        <!-- el botón analizar -->
        <button onclick="analizar()"
                class="mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg">
            Analizar Texto
        </button>

        <!-- resultados -->
        <div id="resultados"
             class="mt-6 p-4 bg-gray-100 border rounded-lg whitespace-pre-line">
        </div>

    </div>

<script>
/* 
   Las funciones 
*/
function cmd(comando) {
    document.execCommand(comando, false, null);
}

function cmdValue(comando, valor) {
    document.execCommand(comando, false, valor);
}

function limpiar() {
    document.getElementById("editor").innerHTML = "";
}

function copiar() {
    let texto = document.getElementById("editor").innerText;
    navigator.clipboard.writeText(texto);
    alert("Texto copiado");
}

/* 
   Lo que edita texto
*/

function esEspacioONuevaLinea(c) {
    return c === " " || c === "\n";
}

function esVocal(c) {
    let vocales = "aeiouAEIOU";
    for (let i = 0; i < vocales.length; i++) {
        if (c === vocales[i]) return true;
    }
    return false;
}

function esLetra(c) {
    return (c >= "A" && c <= "Z") || (c >= "a" && c <= "z");
}

function esConsonante(c) {
    return esLetra(c) && !esVocal(c);
}

function esDigito(c) {
    return c >= "0" && c <= "9";
}

function esPuntuacion(c) {
    let signos = ".,;:!?¿¡\"";
    for (let i = 0; i < signos.length; i++) {
        if (c === signos[i]) return true;
    }
    return false;
}

/* 
   Las funciones texto
*/

function contarPalabras(texto) {
    let palabras = 0;
    let dentro = false;

    for (let i = 0; i < texto.length; i++) {
        let c = texto[i];

        if (!esEspacioONuevaLinea(c) && !dentro) {
            palabras++;
            dentro = true;
        } else if (esEspacioONuevaLinea(c)) {
            dentro = false;
        }
    }
    return palabras;
}

function contarPuntuacion(texto) {
    let t = 0;
    for (let i = 0; i < texto.length; i++) {
        if (esPuntuacion(texto[i])) t++;
    }
    return t;
}

function contarPares(texto) {
    let c = 0;
    for (let i = 0; i < texto.length; i += 2) c++;
    return c;
}

function contarImpares(texto) {
    let c = 0;
    for (let i = 1; i < texto.length; i += 2) c++;
    return c;
}

function contarVocales(texto) {
    let v = 0;
    for (let i = 0; i < texto.length; i++) {
        if (esVocal(texto[i])) v++;
    }
    return v;
}

function contarConsonantes(texto) {
    let c = 0;
    for (let i = 0; i < texto.length; i++) {
        if (esConsonante(texto[i])) c++;
    }
    return c;
}

function contarDigitos(texto) {
    let d = 0;
    for (let i = 0; i < texto.length; i++) {
        if (esDigito(texto[i])) d++;
    }
    return d;
}

function contarMayusInicial(texto) {
    let cont = 0;
    let dentro = false;

    for (let i = 0; i < texto.length; i++) {
        let c = texto[i];

        if (!esEspacioONuevaLinea(c) && !dentro) {
            if (c >= "A" && c <= "Z") cont++;
            dentro = true;
        } else if (esEspacioONuevaLinea(c)) {
            dentro = false;
        }
    }
    return cont;
}

function contarMinusInicial(texto) {
    let cont = 0;
    let dentro = false;

    for (let i = 0; i < texto.length; i++) {
        let c = texto[i];

        if (!esEspacioONuevaLinea(c) && !dentro) {
            if (c >= "a" && c <= "z") cont++;
            dentro = true;
        } else if (esEspacioONuevaLinea(c)) {
            dentro = false;
        }
    }
    return cont;
}

function contarParrafos(texto) {
    let parrafos = 0;
    let tieneTexto = false;

    for (let i = 0; i < texto.length; i++) {
        let c = texto[i];

        if (c !== "\n" && c !== " ") {
            tieneTexto = true;
        }

        if (c === "\n") {
            if (tieneTexto) {
                parrafos++;
            }
            tieneTexto = false;
        }
    }

    if (tieneTexto) {
        parrafos++;
    }

    return parrafos;
}

function invertirTexto(texto) {
    let resultado = "";
    let linea = "";

    for (let i = 0; i < texto.length; i++) {
        let c = texto[i];

        if (c === "\n") {
            
            let invertida = "";
            for (let j = linea.length - 1; j >= 0; j--) {
                invertida += linea[j];
            }
            resultado += invertida + "\n";
            linea = "";
        } else {
            linea += c;
        }
    }

    let invertida = "";
    for (let j = linea.length - 1; j >= 0; j--) {
        invertida += linea[j];
    }
    resultado += invertida;

    return resultado;
}

function contarCaracteresSinSaltos(texto) {
    let c = 0;
    for (let i = 0; i < texto.length; i++) {
        if (texto[i] !== "\n") c++;
    }
    return c;
}

/* 
   Salida del analizador
*/

function analizar() {
    const texto = document.getElementById("editor").innerText;

    let salida =
        "Palabras: " + contarPalabras(texto) + "\n" +
        "Signos de puntuación: " + contarPuntuacion(texto) + "\n" +
        "Vocales: " + contarVocales(texto) + "\n" +
        "Consonantes: " + contarConsonantes(texto) + "\n" +
        "Dígitos: " + contarDigitos(texto) + "\n" +
        "Palabras con mayúscula inicial: " + contarMayusInicial(texto) + "\n" +
        "Palabras con minúscula inicial: " + contarMinusInicial(texto) + "\n" +
        "Párrafos: " + contarParrafos(texto) + "\n" +
        "Texto invertido: " + invertirTexto(texto) + "\n" +
        "Total de caracteres: " + contarCaracteresSinSaltos(texto) + "\n" 
    document.getElementById("resultados").innerText = salida;
}
</script>

</body>
</html>
